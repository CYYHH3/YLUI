const categoryOptions=document.getElementById("category").options,engineOptions=document.getElementById("engine").options,engines={Baidu:"www.baidu.com/s?ie=utf-8&wd=",Bing:"bing.com/search?q=",DogeDoge:"www.dogedoge.com/results?q=",Google:"www.google.com/search?q=",Sogou:"www.sogou.com/web?query=",Yahoo:"search.yahoo.com/search?p=",Q360SearchEngine:"www.so.com/s?q=",BaiduEncyclopedia:"baike.baidu.com/search?word=",HudongEncyclopedia:"www.baike.com/wiki/",Wikipedia:"en.wikipedia.org/wiki/",DictionaryCom:"www.dictionary.com/browse/",CambridgeDictionary:"dictionary.cambridge.org/us/dictionary/english/",KingsoftPowerword:"www.iciba.com/",OxfordDictionaries:"en.oxforddictionaries.com/definition/",Shanbay:"www.shanbay.com/bdc/mobile/preview/word?word=",SpanishDict:"www.spanishdict.com/translate/",Wiktionary:"en.wiktionary.org/wiki/",Youdao:"www.youdao.com/w/",BaiduTranslate:"fanyi.baidu.com/#en/zh/",GoogleTranslate:"translate.google.cn/#en/zh-CN/",IQIYI:"so.iqiyi.com/so/q_",Bilibili:"search.bilibili.com/all?keyword=",TencentVideo:"v.qq.com/x/search/?q=",Youku:"so.youku.com/search_video/q_",YouTube:"www.youtube.com/results?search_query=",Q360Image:"image.so.com/i?q=",QQMusic:"y.qq.com/portal/search.html#w=",NetEaseCloudMusic:"music.163.com/#/search/m/?s=",KuaiDi100:"m.kuaidi100.com/result.jsp?nu=",MDN:"developer.mozilla.org/zh-CN/search?q=",PHP:"www.php.net/results.php?q=",PingPE:"ping.pe/"};let savedQuote=localStorage.getItem("Quote"),theme=localStorage.getItem("Theme");"zh-CN"!=lang&&(document.title=document.getElementById("title").innerText=i18n[lang].titleSuffix.substring(3),document.getElementById("versionLabel").innerText=i18n[lang].version,document.getElementById("developer").innerText=i18n[lang].shangzhenYang,document.getElementsByTagName("input")[0].placeholder=i18n[lang].search,document.getElementById("menuIcon").setAttribute("aria-label",i18n[lang].menu),document.getElementById("wordList").innerText=i18n[lang].wordList,document.getElementById("translate").innerText=i18n[lang].translate,document.getElementById("timer").innerText=i18n[lang].timer,document.getElementById("calculator").innerText=i18n[lang].calculator,document.getElementById("marquee").innerText=i18n[lang].marquee,document.getElementById("randomNumber").innerText=i18n[lang].randomNumber,document.getElementById("textEditor").innerText=i18n[lang].textEditor,document.getElementById("textEncoder").innerText=i18n[lang].textEncoder);function categoryChanged(){switch(engineOptions.length=0,document.getElementById("category").value){case"Web":"zh-CN"===lang?(engineOptions.add(new Option("\u767E\u5EA6","Baidu")),engineOptions.add(new Option("\u5FC5\u5E94","Bing")),engineOptions.add(new Option("\u591A\u5409\u641C\u7D22","DogeDoge")),engineOptions.add(new Option("\u8C37\u6B4C","Google")),engineOptions.add(new Option("\u641C\u72D7","Sogou")),engineOptions.add(new Option("\u96C5\u864E","Yahoo")),engineOptions.add(new Option("360\u641C\u7D22","Q360SearchEngine"))):"zh-TW"===lang?(engineOptions.add(new Option("\u767E\u5EA6","Baidu")),engineOptions.add(new Option("Bing","Bing")),engineOptions.add(new Option("\u591A\u5409\u641C\u7D22","DogeDoge")),engineOptions.add(new Option("Google","Google")),engineOptions.add(new Option("\u641C\u72D7","Sogou")),engineOptions.add(new Option("\u5947\u6469","Yahoo")),engineOptions.add(new Option("360\u641C\u7D22","Q360SearchEngine"))):(engineOptions.add(new Option("Baidu","Baidu")),engineOptions.add(new Option("Bing","Bing")),engineOptions.add(new Option("DogeDoge","DogeDoge")),engineOptions.add(new Option("Google","Google")),engineOptions.add(new Option("Sogou","Sogou")),engineOptions.add(new Option("Yahoo","Yahoo")),engineOptions.add(new Option("360 Search Engine","Q360SearchEngine")));break;case"Encyclopedia":"zh-CN"===lang?(engineOptions.add(new Option("\u767E\u5EA6\u767E\u79D1","BaiduEncyclopedia")),engineOptions.add(new Option("\u4E92\u52A8\u767E\u79D1","HudongEncyclopedia")),engineOptions.add(new Option("\u7EF4\u57FA\u767E\u79D1","Wikipedia"))):"zh-TW"===lang?(engineOptions.add(new Option("\u767E\u5EA6\u767E\u79D1","BaiduEncyclopedia")),engineOptions.add(new Option("\u4E92\u52D5\u767E\u79D1","HudongEncyclopedia")),engineOptions.add(new Option("\u7DAD\u57FA\u767E\u79D1","Wikipedia"))):(engineOptions.add(new Option("Baidu Encyclopedia","BaiduEncyclopedia")),engineOptions.add(new Option("Hudong Encyclopedia","HudongEncyclopedia")),engineOptions.add(new Option("Wikipedia","Wikipedia")));break;case"Dictionary":"zh-CN"===lang?(engineOptions.add(new Option("Dictionary.com","DictionaryCom")),engineOptions.add(new Option("\u5251\u6865\u8BCD\u5178","CambridgeDictionary")),engineOptions.add(new Option("\u91D1\u5C71\u8BCD\u9738","KingsoftPowerword")),engineOptions.add(new Option("\u725B\u6D25\u8BCD\u5178","OxfordDictionaries")),engineOptions.add(new Option("\u6247\u8D1D\u5355\u8BCD","Shanbay")),engineOptions.add(new Option("SpanishDict","SpanishDict")),engineOptions.add(new Option("\u7EF4\u57FA\u8BCD\u5178","Wiktionary")),engineOptions.add(new Option("\u6709\u9053\u8BCD\u5178","Youdao"))):"zh-TW"===lang?(engineOptions.add(new Option("Dictionary.com","DictionaryCom")),engineOptions.add(new Option("\u528D\u6A4B\u8A5E\u5178","CambridgeDictionary")),engineOptions.add(new Option("\u91D1\u5C71\u8A5E\u5178","KingsoftPowerword")),engineOptions.add(new Option("\u725B\u6D25\u8A5E\u5178","OxfordDictionaries")),engineOptions.add(new Option("\u6247\u8C9D\u55AE\u8A5E","Shanbay")),engineOptions.add(new Option("SpanishDict","SpanishDict")),engineOptions.add(new Option("\u7DAD\u57FA\u8A5E\u5178","Wiktionary")),engineOptions.add(new Option("\u6709\u9053\u8A5E\u5178","Youdao"))):(engineOptions.add(new Option("Dictionary.com","DictionaryCom")),engineOptions.add(new Option("Cambridge Dictionary","CambridgeDictionary")),engineOptions.add(new Option("Kingsoft Powerword","KingsoftPowerword")),engineOptions.add(new Option("Oxford Dictionaries","OxfordDictionaries")),engineOptions.add(new Option("Shanbay Word","Shanbay")),engineOptions.add(new Option("SpanishDict","SpanishDict")),engineOptions.add(new Option("Wiktionary","Wiktionary")),engineOptions.add(new Option("Youdao Dictionary","Youdao")));break;case"Translate":"zh-CN"===lang?(engineOptions.add(new Option("\u767E\u5EA6\u7FFB\u8BD1","BaiduTranslate")),engineOptions.add(new Option("\u8C37\u6B4C\u7FFB\u8BD1","GoogleTranslate"))):"zh-TW"===lang?(engineOptions.add(new Option("\u767E\u5EA6\u7FFB\u8B6F","BaiduTranslate")),engineOptions.add(new Option("Google\u7FFB\u8B6F","GoogleTranslate"))):(engineOptions.add(new Option("Baidu Translate","BaiduTranslate")),engineOptions.add(new Option("Google Translate","GoogleTranslate")));break;case"Video":"zh-CN"===lang?(engineOptions.add(new Option("\u7231\u5947\u827A","IQIYI")),engineOptions.add(new Option("\u54D4\u54E9\u54D4\u54E9","Bilibili")),engineOptions.add(new Option("\u817E\u8BAF\u89C6\u9891","TencentVideo")),engineOptions.add(new Option("\u4F18\u9177","Youku")),engineOptions.add(new Option("YouTube","YouTube"))):"zh-TW"===lang?(engineOptions.add(new Option("\u611B\u5947\u85DD","IQIYI")),engineOptions.add(new Option("\u55F6\u54E9\u55F6\u54E9","Bilibili")),engineOptions.add(new Option("\u9A30\u8A0A\u8996\u983B","TencentVideo")),engineOptions.add(new Option("\u512A\u9177","Youku")),engineOptions.add(new Option("YouTube","YouTube"))):(engineOptions.add(new Option("IQIYI","IQIYI")),engineOptions.add(new Option("Bilibili","Bilibili")),engineOptions.add(new Option("Tencent Video","TencentVideo")),engineOptions.add(new Option("Youku","Youku")),engineOptions.add(new Option("YouTube","YouTube")));break;case"Picture":"zh-CN"===lang?engineOptions.add(new Option("360\u56FE\u7247","Q360Image")):"zh-TW"===lang?engineOptions.add(new Option("360\u5716\u7247","Q360Image")):engineOptions.add(new Option("360 Image","Q360Image"));break;case"Music":"zh-CN"===lang?(engineOptions.add(new Option("QQ\u97F3\u4E50","QQMusic")),engineOptions.add(new Option("\u7F51\u6613\u4E91\u97F3\u4E50","NetEaseCloudMusic"))):"zh-TW"===lang?(engineOptions.add(new Option("QQ\u97F3\u6A02","QQMusic")),engineOptions.add(new Option("\u7DB2\u6613\u4E91\u97F3\u6A02","NetEaseCloudMusic"))):(engineOptions.add(new Option("QQ Music","QQMusic")),engineOptions.add(new Option("NetEase Cloud Music","NetEaseCloudMusic")));break;case"Other":"zh-CN"===lang?(engineOptions.add(new Option("\u5FEB\u9012100","KuaiDi100")),engineOptions.add(new Option("MDN","MDN")),engineOptions.add(new Option("PHP.net","PHP")),engineOptions.add(new Option("Ping.pe","PingPE"))):"zh-TW"===lang?(engineOptions.add(new Option("\u5FEB\u905E100","KuaiDi100")),engineOptions.add(new Option("MDN","MDN")),engineOptions.add(new Option("PHP.net","PHP")),engineOptions.add(new Option("Ping.pe","PingPE"))):(engineOptions.add(new Option("KuaiDi100","KuaiDi100")),engineOptions.add(new Option("MDN","MDN")),engineOptions.add(new Option("PHP.net","PHP")),engineOptions.add(new Option("Ping.pe","PingPE")));}}function getQuote(a){fetch("https://v1.jinrishici.com/all?"+encodeData({time:Date.now()})).then(a=>a.text()).then(b=>{b&&(a&&a(b),savedQuote=b,localStorage.setItem("Quote",savedQuote))})}function loadQuote(a){a.startsWith("{")?(a=JSON.parse(a),document.getElementById("quote").innerText=a.content,document.getElementById("quote").onclick=document.getElementById("quote").oncontextmenu=b=>(showMenu(b,[{onclick:()=>{loadQuote(savedQuote),closeMenu()},text:i18n[lang].change},{onclick:()=>{showDialog(a.author+"\u300A"+a.origin+"\u300B",{cancel:null,ok:()=>{open("https://hanyu.baidu.com/s?"+encodeData({wd:a.origin}))}}),closeMenu()},text:i18n[lang].lookUp}]),b.stopPropagation(),!1)):document.getElementById("quote").innerText=a,getQuote()}onkeydown=a=>{if(13==a.keyCode){const a=document.getElementsByTagName("input")[0].value;a&&open("https://"+engines[document.getElementById("engine").value]+encodeURIComponent(a))}},document.getElementsByTagName("input")[0].onclick=function(){this.value=""},document.getElementById("category").onchange=categoryChanged,document.body.oncontextmenu=document.getElementById("menuIcon").onclick=a=>(showMenu(a,[{if:450>=innerWidth,onclick:()=>{showPrompt({callback:a=>{theme=a,localStorage.setItem("Theme",theme),showToast(i18n[lang].changesSaved)},default:theme,options:[{text:i18n[lang].lightColor,value:"Light"},{text:i18n[lang].darkColor,value:"Dark"}]}),closeMenu()},text:i18n[lang].theme},{onclick:()=>{goTo("feedback"),closeMenu()},text:i18n[lang].feedback},{onclick:()=>{open("https://www.retiehe.com/"),closeMenu()},text:i18n[lang].home},{onclick:()=>{open("https://www.retiehe.com/tos"),closeMenu()},text:i18n[lang].termsOfService},{onclick:()=>{open("https://www.retiehe.com/privacy"),closeMenu()},text:i18n[lang].privacyPolicy},{if:!isApp&&isAndroid,onclick:()=>{location.href="Google"==document.getElementById("engine").value?"https://play.google.com/store/apps/details?id=shangzhenyang.rthtoolbox":"https://www.coolapk.com/apk/163867",closeMenu()},text:i18n[lang].downloadApp}],{vertical:!0}),!1),document.getElementById("version").innerText=ver,categoryOptions.add(new Option(i18n[lang].web,"Web")),categoryOptions.add(new Option(i18n[lang].encyclopedia,"Encyclopedia")),categoryOptions.add(new Option(i18n[lang].dictionary,"Dictionary")),categoryOptions.add(new Option(i18n[lang].translate,"Translate")),categoryOptions.add(new Option(i18n[lang].video,"Video")),categoryOptions.add(new Option(i18n[lang].picture,"Picture")),categoryOptions.add(new Option(i18n[lang].music,"Music")),categoryOptions.add(new Option(i18n[lang].other,"Other")),lang.startsWith("zh")&&(savedQuote?loadQuote(savedQuote):getQuote(loadQuote)),document.getElementById("category").value="Web",categoryChanged(),document.getElementById("engine").value="Baidu",loadLinks(),addEventListener("load",()=>{if(isApp&&(loadJs("cordova",()=>{document.addEventListener("deviceready",()=>{cordova.exec(a=>{theme||(theme="true"==a?"Dark":"Light",localStorage.setItem("Theme",theme))},null,"DarkMode","darkmode"),cordova.openwith.init(),cordova.openwith.addHandler(a=>{if(0<a.items.length){const b=new URL(a.items[0].uri);"/"!=b.pathname&&(location.href=b.pathname+b.search)}a.exit&&cordova.openwith.exit()})})}),!localStorage.getItem("Agree"))){const a=document.createElement("div"),b=document.createElement("iframe"),c=document.createElement("button");a.classList.add("popup","light-bg","fade-in"),a.style.paddingTop="0",b.title=i18n[lang].privacyPolicy,b.src="https://www.retiehe.com/privacy",c.classList.add("waves-effect"),c.style.width="100%",c.innerText=i18n[lang].agree,c.onclick=()=>{rmElement(a),localStorage.setItem("Agree",Date.now())},a.appendChild(b),a.appendChild(c),document.body.appendChild(a)}loadWaves()});